---
title: 파일 시그니처(매직 넘버) - FBX와 TGA 찾아내기
date: 2020-03-07 00:00
categories:
- [프로그래밍, 디버깅]
mathjax: true
---


# 헥스 파일을 뒤적거리다
하루는 심심해서 게임의 용량이 큰(40mb 정도) 파일을 서브라임 텍스트로 열어보았다. 나오는 건 의미 모를 16진수의 나열이었다.

**사실 이 파일은 그림이기 때문에 이미지 뷰어로 보면 열리지 않을까?** 라는 생각으로
이미지 뷰어로 열어봤으나 열리지 않았다.

음악 파일도 아니고,
영상 파일도 아니었는데
**압축 프로그램으로 연결해서 실행하니 열렸다!**

* 잠시 다른 이야기로 빠지자면, 의외로 파일을 암호화하지 않고 zip파일로 압축한 다음 확장자를 바꾸면 생각 이상으로 사람들이 찾아내지 못한다. 예를 들어, 삼성 노트의 파일 확장자인 sdoc는 사실 압축 파일의 확장자를 바꾼 파일이다. 열면 내가 쓴 텍스트와 그림이 담겨 있다. 물론 본문이 그대로 들어가있는 건 아니고 파싱을 좀 해야 하지만...

이왕 열린 김에 재미가 동해서, 이 파일의 정체가 무엇일지 찾아보고자 했다. 이 파일도 16진수의 나열이었기에 앞의 방법을 똑같이 시도해보았다.

그렇지만 이미지도, 음악도, 영상도, 압축 파일도 아니었다.

포기할까 하다가 그냥 맨 앞에 있는 16진수를 구글링해보기로 했다. MD5라던가 Base64가 디코딩이 가능하다면 이런 16진수도 디코딩이 가능하리라고 생각해서다.

4b61 7964 6172 6120 4642 5820 4269 6e61
7279 2020 001a 0020 1c00 0062 0700 0000
...

이 내용을 구글에 검색했고 나는 [이 16진수를 그대로 인용한 사이트](https://qiita.com/gshirato/items/87586421de0ec37e46a6)를 발견했다.

일본 사이트인데 구글 크롬으로 번역했다. 그냥 영어블로그인 줄 알고 나중에 확인하고는 놀랐다.

# FBX 파일?
이 사이트의 내용에 따르면, 내가 뒤적거리던 이 파일은 FBX라는 확장자의 파일이었다.

이 파일의 Magic Number가
4b61 7964 6172 6120 4642 5820 4269 6e61
7279 2020 00
이고, 이는 FBX를 가리킨다고 이 사이트는 설명하고 있었다.

찾아보니 FBX는 Filmbox의 약자로, Kaydara에서 만든 3D 모델의 정보를 담은 파일 포맷이라 한다.
즉, FBX 파일을 열면 3D로 구성된 자동차라던가, 캐릭터라던가 하는 게 튀어나온다는 소리다.

# 매직 넘버가 뭐야?
특정 확장자의 파일은 동일한 바이너리 코드로 시작한다.
예를 들어, jpeg 파일을 sublime text 등으로 열면 맨 앞에서부터 21바이트까지는 완전히 동일한 코드를 공유한다는 의미이다.
이를 파일 시그니처 혹은 파일 매직 넘버라 한다.

4b61 7964 6172 6120 4642 5820 4269 6e61
7279 2020 00

위 코드를 해석해보자.
1 바이트는 16진수 2글자와 같다. 즉, 16진수 4b(0x4b라고도 표기한다)는 알파벳 하나라는 뜻이다.
이때,
4b = 0x4b = 아스키 코드 K
61 = 0x61 = 아스키 코드 a
...
이런 식으로 나아가서 위 매직 넘버를 해석하면
**Kaydata FBX binary 0x00** 라는 글자를 얻는다.
즉, 헥스 코드 맨 앞에 **"이 코드는 Kaydata의 FBX 파일입니다** 라고 말하고 있는 셈이다.

# 그래서 어떻게 여는데?
이것도 찾아보았다.
다행히 3D 툴인 Blender가 오픈소스로 무료로 다운로드할 수 있었다.

Blender를 실행한 다음 File - Import - FBX 클릭 후 이 파일을 클릭하니 3D 모델이 떡하니 나왔다.

끝내 나는 이 파일의 확장자 알아낼 수 있었다.

# 시그니처가 뒤에 있을 수도, 맨 앞이 아니라 맨 앞 약간 뒤에 있을 수도 있다.
헥스 에디터로 열어봐도 대체 정체를 모르는 파일이 있었는데, **맨 아랫부분**의 헥스값을 보니
54 52 55 45 56 49 53 49 4F 4E 2D 58 46 49 4C 45 2E 00
이런 값이었고 번역된 아스키값은 **TRUEVISION-XFILE..**이었다.

구글링해보니 TGA 파일이었고, tga 확장자를 이름 뒤에 붙여주니 제대로 열렸다(그림판으로는 안 열려서 그림인 줄 몰랐다.)

한편, 맨앞 부분은 의미없는 값이었는데 한 5번째 줄부터
2710 4164
6f62 6520 5068 6f74 6f73 686f 7020 4343
2032 3031 3820 2857 696e 646f 7773 2900
3230 3230 3a30 323a 3230

라는 값이 있었고 이는 **Adobe Photoshop CC 2018 (Windows).2020:02:20** 이라는 값이었다.
(사실 맨 앞에 ‚Exif라고 해서, 이게 어떤 값인지 나와 있긴 했다.)

확장자를 jpg, tga로 바꿨더니 둘 다 제대로 표시되었다. 즉 그림파일.


# 참고문헌
* [FBX 확장자의 파일의 시그니처. 이 사이트 덕분에 답을 얻었다.](https://qiita.com/gshirato/items/87586421de0ec37e46a6)
* [특정 확장자의 파일은 동일한 바이너리 코드로 시작하는데, 이를 파일 시그니처 혹은 파일 매직 넘버라 한다.](http://forensic-proof.com/archives/300)
* [FBX가 뭐야](https://fileinfo.com/extension/fbx)
